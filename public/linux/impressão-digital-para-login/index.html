<!DOCTYPE html>
<html lang="pt-br">
    <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="generator" content="Hugo 0.120.4">

    

    

    
        
            <meta name="description" content="Como eu configurei a impressão digital para funcionar como Login (inclusive para comandos como sudo)" />
        

        
            <meta name="keywords" content="[Linux, login, Debian, fingerprint]" />
        

        
            <meta name="author" content="Giancarlo Bonvenuto" />
        

    


    <title>
        
            Impressão Digital Para Login |
            Giancarlo Bonvenuto
        
    </title>

    


    
    

    
    


    
    


    
    


    
    
        
    

    
        
    


    
    

    

    

        
        


        
        


        <link
            rel="stylesheet"
            href="/css/index_d751713.min.3e08ed8e785333aeca294f421debb72a5d1f06bdf755859c8e759951df539370ff746305dd396caa3ab2b8b6be3f3f2d71284ed349b7fe85711b7df1925e5462.css"
            integrity="sha512-PgjtjnhTM67KKU9CHeu3Kl0fBr33VYWcjnWZUd9Tk3D/dGMF3TlsqjqyuLa&#43;Pz8tcShO00m3/oVxG33xkl5UYg==" />
    


    
    

    
        
    

    

    

    

        

    
</head>



    <body>
        <header class="header">
    <div class="header_left">
        
    </div>

    <div class="header_middle">
        
            Impressão Digital Para Login -
            Giancarlo Bonvenuto
        
    </div>
</header>



        <main>
            <aside class="sidebar">
    



    
    

    
    


    <ul class="section-tree">
        
            
                <li
                    
                        class="dir opened-dir"
                    >
                    <span class="dir-text"> Linux </span>

                    



    
    

    
    


    <ul class="section-tree">
        
            
                <li class="file">
                    <a href="https://giancarlo.bonvenuto.com.br/linux/impress%C3%A3o-digital-para-login/" title="./linux/impress%C3%A3o-digital-para-login/">
                        Impressão Digital Para Login
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://giancarlo.bonvenuto.com.br/linux/meu-setup/" title="./linux/meu-setup/">
                        Meu Setup
                    </a>
                </li>
            
        
    </ul>


                </li>
            
        
            
                <li
                    
                        class="dir closed-dir"
                    >
                    <span class="dir-text"> Posts </span>

                    



    
    

    
    


    <ul class="section-tree">
        
            
                <li class="file">
                    <a href="https://giancarlo.bonvenuto.com.br/posts/teste/" title="./posts/teste/">
                        Teste
                    </a>
                </li>
            
        
    </ul>


                </li>
            
        
            
                <li
                    
                        class="dir closed-dir"
                    >
                    <span class="dir-text"> Post </span>

                    



    
    

    
    


    <ul class="section-tree">
        
            
                <li class="file">
                    <a href="https://giancarlo.bonvenuto.com.br/post/teste/" title="./post/teste/">
                        Teste
                    </a>
                </li>
            
        
    </ul>


                </li>
            
        
            
                <li
                    
                        class="dir closed-dir"
                    >
                    <span class="dir-text"> Blog </span>

                    



    
    

    
    


    <ul class="section-tree">
        
            
                <li class="file">
                    <a href="https://giancarlo.bonvenuto.com.br/blog/primeiro-post/" title="./blog/primeiro-post/">
                        Primeiro Post
                    </a>
                </li>
            
        
    </ul>


                </li>
            
        
            
                <li
                    
                        class="dir closed-dir"
                    >
                    <span class="dir-text"> Baja </span>

                    



    
    

    
    


    <ul class="section-tree">
        
            
                <li class="file">
                    <a href="https://giancarlo.bonvenuto.com.br/baja/o-que-%C3%A9/" title="./baja/o-que-%C3%A9/">
                        O Que É
                    </a>
                </li>
            
        
    </ul>


                </li>
            
        
    </ul>


</aside>
<aside class="exapandable"></aside>


            
    <article class="main">
        <button
    class="sidebar-toggle-btn"
    type="menu"
    aria-expanded="false"
    aria-haspopup="true">
    <i class="bi bi-list"></i>
</button>



        <div class="title">
            <h1 class="title-header">
                Impressão Digital Para Login
            </h1>

            <div class="author-date-readtime">
                

                    
                        <div class="author" title="Autor">
                            <i class="bi bi-person"></i>
                            <a
                                href="/author/giancarlo-bonvenuto/"
                                class="cat-btn">
                                Giancarlo Bonvenuto
                            </a>
                        </div>
                    

                

                
                    <div class="date" title="Data">
                        <i class="bi bi-calendar3"></i>
                        <time
                            datetime="2023.12.25"
                            >2023.12.25
                        </time>
                    </div>
                

                
                    <div
                        class="readtime"
                        title="Tempo De Leitura">
                        <i class="bi bi-clock"></i>
                        3 minutos de leitura
                    </div>
                
            </div>
        </div>

        <div class="article-meta">
            
                <div class="categories">
                    <i
                        class="bi bi-bookmarks"
                        title="Categorias"></i>
                    
                        <a
                            href="/categories/linux/"
                            class="cat-btn">
                            Linux
                        </a>
                    
                        <a
                            href="/categories/debian/"
                            class="cat-btn">
                            Debian
                        </a>
                    
                </div>
            

            
                <div class="tags">
                    <i
                        class="bi bi-tags"
                        title="Tags"></i>
                    
                        <a
                            href="/tags/login/"
                            class="tag-btn">
                            Login
                        </a>
                    
                        <a
                            href="/tags/fingerprint/"
                            class="tag-btn">
                            Fingerprint
                        </a>
                    
                </div>
            

            
                <div class="breadcumb">
                    <i class="bi bi-folder"></i>
                    
    
    




<a href="https://giancarlo.bonvenuto.com.br/" class="bread-btn">
    
        <i class="bi bi-house-fill"></i>
    

    
        Home
    
</a>




    /



<a href="https://giancarlo.bonvenuto.com.br/linux/" class="bread-btn">
    

    
        Linux
    
</a>




    /



<a href="https://giancarlo.bonvenuto.com.br/linux/impress%C3%A3o-digital-para-login/" class="bread-btn">
    

    
        Impressão Digital Para Login
    
</a>

                </div>
            

            
        </div>

        
            
                <nav id="TableOfContents">
  <ul>
    <li><a href="#instalação">Instalação</a></li>
    <li><a href="#registrando-a-digital">Registrando a digital</a></li>
    <li><a href="#utilização-para-comandos-como-sudo">Utilização para comandos como sudo</a></li>
  </ul>

  <ul>
    <li><a href="#utilizando-para-logar-no-sistema">Utilizando para logar no sistema</a>
      <ul>
        <li><a href="#utilizando-com-i3lock">Utilizando com <code>i3lock</code></a></li>
        <li><a href="#para-outros-sistemas-de-login-como-o-gddm">Para outros sistemas de login como o <code>gddm</code></a></li>
      </ul>
    </li>
    <li><a href="#problemas">Problemas</a></li>
  </ul>
</nav>
            

        


        <div class="content">
            
                <h2 id="instalação">Instalação</h2>
<p>Esse artigo não é um tutorial, mas um &ldquo;diário&rdquo; de como eu fiz para configurar a impressão digital no Linux.</p>
<p>Primeiramente, eu segui <a href="https://wiki.debian.org/SecurityManagement/fingerprint%20authentication">este tutorial</a>. Contudo, eu uso Debian testing, e infelizmente tanto <code>fprintd</code> quanto <code>libpam-fprintd</code> não estavam disponível para instalação. Assim tive que baixar diretamente do site do Debian os pacotes .deb em <a href="https://packages.debian.org/bookworm/fprintd">fprintd</a> e <a href="https://packages.debian.org/unstable/libpam-fprintd">libpam-fprintd</a>.</p>
<h2 id="registrando-a-digital">Registrando a digital</h2>
<p>Para registrar o indicador direito, basta executei o seguinte comando:</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="fprintd-enroll%20$USER">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fish" data-lang="fish"><span style="display:flex;"><span><span style="color:#a6e22e">fprintd-enroll</span> $USER</span></span></code></pre></div>
    
</div>
<p><em>Em que <code>$USER</code> é o usuário ao qual a impressão digital pertence.</em></p>
<p><em>Alem do mais, caso não funcione de primeira, tente executar como <code>sudo</code>.</em></p>
<p>E fiquei colocando e tirando o dedo do sensor até que aparecesse a mensagem <code>Enroll result: enroll-completed</code></p>
<p>Para adicionar outros dedos, como o indicador esquerdo, eu utilizei:</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="fprintd-enroll%20$USER%20-f%20left-index-finger">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fish" data-lang="fish"><span style="display:flex;"><span><span style="color:#a6e22e">fprintd-enroll</span> $USER <span style="color:#a6e22e">-f</span> left-index-finger</span></span></code></pre></div>
    
</div>
<p>E para ver o nome de cada dedo, eu fiz <code>fprintd-enroll $USER -f a</code>, em que &ldquo;a&rdquo; não é um dedo válido, assim ele listará todos os dedos disponíveis</p>
<h2 id="utilização-para-comandos-como-sudo">Utilização para comandos como sudo</h2>
<p>Em seguida habilitei a impressão digital para comandos como <code>sudo</code>:</p>
<blockquote>
<h1 id="fingerprint-authentication-with-sudohttpswikidebianorgsecuritymanagementfingerprint20authentication"><a href="https://wiki.debian.org/SecurityManagement/fingerprint%20authentication">Fingerprint Authentication with sudo</a></h1>
<p>To enable fingerprint authentication with sudo, run</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="pam-auth-update">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <pre><code>pam-auth-update</code></pre>
    
</div>
<p>and enable the &ldquo;Fingerprint authentication&rdquo; profile by checking the corresponding checkbox and then pressing &ldquo;OK&rdquo; (see Screenshot pam-auth-update).</p>
</blockquote>
<h2 id="utilizando-para-logar-no-sistema">Utilizando para logar no sistema</h2>
<p>Enfim, para habilitar o <code>fprintd</code> no meu login manager (<a href="https://github.com/fairyglade/ly">ly</a>), adicionei as seguintes linhas:</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="auth%20%09%20%20%20sufficient%20%20%20pam_unix.so%20try_first_pass%20likeauth%20nullok%0aauth%09%20%20%20sufficient%20%20%20pam_fprintd.so">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <pre><code>auth 	   sufficient   pam_unix.so try_first_pass likeauth nullok
auth	   sufficient   pam_fprintd.so</code></pre>
    
</div>
<p>Assim, o arquivo <code>/etc/pam.d/ly</code> ficou:</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="#%25PAM-1.0%0a%0aauth%20%09%20%20%20sufficient%20%20%20pam_unix.so%20try_first_pass%20likeauth%20nullok%0aauth%09%20%20%20sufficient%20%20%20pam_fprintd.so%0aauth%20%20%20%20%20%20%20include%20%20%20%20%20%20login%0aaccount%20%20%20%20include%20%20%20%20%20%20login%0apassword%20%20%20include%20%20%20%20%20%20login%0asession%20%20%20%20include%20%20%20%20%20%20login">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <pre><code>#%PAM-1.0

auth 	   sufficient   pam_unix.so try_first_pass likeauth nullok
auth	   sufficient   pam_fprintd.so
auth       include      login
account    include      login
password   include      login
session    include      login</code></pre>
    
</div>
<h3 id="utilizando-com-i3lock">Utilizando com <code>i3lock</code></h3>
<p>Para travar o meu notebook quando eu fecho a tela, eu utilizo o <a href="https://github.com/Raymo111/i3lock-color">i3lock-color</a>. Assim, para habilitar a leitura de impressão digital também no i3lock eu adicionei as mesmas linhas:</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="auth%20%09%20%20%20sufficient%20%20%20pam_unix.so%20try_first_pass%20likeauth%20nullok%0aauth%09%20%20%20sufficient%20%20%20pam_fprintd.so">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <pre><code>auth 	   sufficient   pam_unix.so try_first_pass likeauth nullok
auth	   sufficient   pam_fprintd.so</code></pre>
    
</div>
<p>E assim, o arquivo <code>/etc/pam.d/i3lock</code> ficou:</p>







<div class="codeblock">
    
        <div class="copy-button-box">
            <button class="copy-button" state="copy" data="#%0a#%20PAM%20configuration%20file%20for%20the%20i3lock-color%20screen%20locker.%20By%20default,%20it%20includes%0a#%20the%20%27system-local-login%27%20configuration%20file%20%28see%20/etc/pam.d/system-local-login%29%0a#%20for%20Arch%20and%20Gentoo%20and%20%27login%27%20for%20Debian.%20Note%20that%20upstream%20uses%20only%20%27login%27,%0a#%20which%20doesn%27t%20work%20on%20Arch%20and%20Gentoo.%0a#%0a%0a#auth%20include%20system-local-login%20#%20For%20Arch/Gentoo%0aauth%20%09%20sufficient%20%20%20pam_unix.so%20try_first_pass%20likeauth%20nullok%0aauth%09%20sufficient%20%20%20pam_fprintd.so%0aauth%20include%20login%20#%20For%20Debian">
                <i class="bi bi-copy"></i>
            </button>
        </div>
    

    
        <pre><code>#
# PAM configuration file for the i3lock-color screen locker. By default, it includes
# the &#39;system-local-login&#39; configuration file (see /etc/pam.d/system-local-login)
# for Arch and Gentoo and &#39;login&#39; for Debian. Note that upstream uses only &#39;login&#39;,
# which doesn&#39;t work on Arch and Gentoo.
#

#auth include system-local-login # For Arch/Gentoo
auth 	 sufficient   pam_unix.so try_first_pass likeauth nullok
auth	 sufficient   pam_fprintd.so
auth include login # For Debian</code></pre>
    
</div>
<h3 id="para-outros-sistemas-de-login-como-o-gddm">Para outros sistemas de login como o <code>gddm</code></h3>
<p>Ainda não testei, mas pretendo algum dia criar uma máquina virtual e ver se consigo. Isso porque passei um ano inteiro utilizando <a href="https://pop.system76.com/">Pop!_OS</a> com Gnome, e não fazia ideia de que era possível habilitar a leitura de impressão digital.</p>
<p>Mas caso você tenha curiosidade em habilitar no seu gdm ou outro login manager, eu recomendo uma leitura na <a href="https://wiki.archlinux.org/title/fprint">ArchWiki</a></p>
<h2 id="problemas">Problemas</h2>
<p>Para a utilização com o comando <code>sudo</code>, a leitura de impressão digital funcional muito bem. Contudo para o <code>ly</code> e o <code>i3lock</code> eu preciso inserir uma senha errada (ou vazia) antes de eles conseguirem detectar minha impressão digital.</p>
<p>Este não é um problema muito grave, pois é só um clique de <code>Enter</code> a mais. Mas de qualquer forma continuarei procurando alguma solução para tal problema</p>

            
        </div>
    </article>

        </main>

        <footer class="footer">
    <div class="footer-left">
        <ul class="social">
            

            
                <li>Giancarlo Bonvenuto</li>
            

            
                
                    <li>
                        
                            <a href="mailto:giancarlo.bonvenuto@gmail.com" target="_blank">
                                <i class="bi-envelope"></i>
                            </a>
                        

                    </li>
                
            
                
            
                
                    <li>
                        
                            <a href="https://github.com/gBonvenuto" target="_blank">
                                <i class="bi-github"></i>
                            </a>
                        

                    </li>
                
            
                
            
                
                    <li>
                        
                            <a href="https://www.linkedin.com/in/giancarlo-bonvenuto-721b212a6/" target="_blank">
                                <i class="bi-linkedin"></i>
                            </a>
                        

                    </li>
                
            
                
            
                
            
                
            
                
            
                
            
        </ul>
    </div>

    <div class="footer-right">
        <ul class="control status clearfix">
            
                <li>
                    
                        Word Count:
                        504
                    
                </li>
            

            
            
                <li class="language-selector">
                    <i class="bi bi-translate"></i>

                    <ul class="language-selector-menu">
                        
                            <li>
                                <a href="https://giancarlo.bonvenuto.com.br/">
                                    pt-br
                                    -Português
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://giancarlo.bonvenuto.com.br/en/">
                                    en
                                    -English
                                </a>
                            </li>
                        
                    </ul>
                </li>
            

            
                <li>pt-br</li>
            

            
                <li>
                    <a href="https://gohugo.io" class="btn" target="_blank"
                        >Hugo: 0.120.4</a
                    >
                </li>
            

            
                <li>
                    <a
                        href="https://github.com/JingWangTW/dark-theme-editor"
                        class="btn"
                        target="_blank"
                        >Theme: dark-theme-editor</a
                    >
                </li>
            

            
                <li>
                    
                        Last modified: &nbsp;
                        <time>
                            dez. 25 2023 21:27:50
                        </time>
                    
                </li>
            

            
                <li title="">
                    
                </li>
            
        </ul>
    </div>
</footer>

    </body>

    


















    



    




    
    


    
    


    <script
        type="text/javascript"
        src="/js/index_d751713.min.5eeb120f16ea146352725c420364f87befead45f678142b8f0ffbef024646931fbc06bff07a7bd6cb57fa2f8cd8a21ba6a4ee5a278ec32303a378bc1cd17f246.js"
        integrity="sha512-XusSDxbqFGNSclxCA2T4e&#43;/q1F9ngUK48P&#43;&#43;8CRkaTH7wGv/B6e9bLV/ovjNiiG6ak7lonjsMjA6N4vBzRfyRg=="></script>







    








<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />




</html>
